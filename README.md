# javascript-lotto-precourse

## 기능 요구사항

-   로또 번호의 숫자 범위는 1~45까지이다.
-   1개의 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
-   당첨 번호 추첨 시 중복되지 않는 숫자 6개와 보너스 번호 1개를 뽑는다.
-   당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.
-   1등: 6개 번호 일치 / 2,000,000,000원
-   2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
-   3등: 5개 번호 일치 / 1,500,000원
-   4등: 4개 번호 일치 / 50,000원
-   5등: 3개 번호 일치 / 5,000원
-   로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또를 발행해야 한다.
-   로또 1장의 가격은 1,000원이다.
-   당첨 번호와 보너스 번호를 입력받는다.
-   사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력하고 로또 게임을 종료한다.
-   사용자가 잘못된 값을 입력할 경우 "[ERROR]"로 시작하는 메시지와 함께 Error를 발생시키고 해당 메시지를 출력한 다음 해당 지점부터 다시 입력을 받는다.

## 로직 순서

1. 구입 금액을 입력하면 해당 금액 만큼의 로또 번호 배열이 든 배열을 만듦
2. 1의 내용을 화면에 출력함
3. 당첨번호를 받아 length가 45인 배열에서 당첨번호와 일치하는 인덱스의 원소를 1로 바꾸고 저장함. 보너스 번호도 저장
4. 3에서 저장한 값들을 기반으로 1에서 만든 배열의 원소들의 로또번호들의 당첨 여부를 계산함
5. 계산된 당첨 정도를 바탕으로 몇 등에 속하는지 찾아서 반환해줌
6. 당첨된 등수에 따른 당첨금을 계산하고 그를 기반으로 수익률을 계산함
7. 6의 결과를 화면에 보여줌

## 구현해야 할 기능

0. Lotto class의 예외 처리 추가

-   중복된 숫자가 든 배열일 경우 에러 반환
-   1 ~ 45의 숫자가 아닌 원소가 든 배열일 경우 에러 반환
-   numbers를 getter로 반환해줄 수 있도록 구현
-   numbers를 오름차순으로 저장하도록 변경

1. 입력된 구입 금액을 기반으로 로또 번호가 든 배열을 만드는 LotteryGenerator class

-   로또 배열이 든 배열인 lottoList 필드, 구입금액을 저장하는 buyingCost 필드
    -   buyingCost가 1000원 단위가 아닌 경우 예외 처리 한다
    -   공백들은 다 허용하며 "원"이 붙거나 안붙거나 상관없이 허용
    -   정규표현식으로 위의 경우를 필터링하고 동시에 0을 3개 제외한 로또 구매 장수가 반환되도록 함
-   Random.pickUniqueNumbersInRange(1, 45, 6)로 나온 값으로 Lotto class로 검증하고 lottoList에 넣음
-   만약 Lotto class에서 에러가 발생할 경우 다시 새로운 배열을 받아서 Lotto class를 만들어야 함
-   위의 과정을 구입 장수만큼 실행하고 배열을 반환함
-   getter로 lottoList를 반환할 수 있도록 구현

2. 로또 번호들이 얼마나 일치하는지 확인하고 등수를 반환해줄 LottoMatcher class

-   당첨번호 배열인 winNumberList와 보너스 번호를 저장하는 bonusNumber 필드, 결과를 저장하는 lottoRankResult 필드
-   setter로 length가 45가 되는 winNumberList에서 당첨번호에 해당하는 인덱스를 1로 변경
    -   입력한 당첨번호가 6개의 숫자가 아닐 경우 예외 처리
    -   입력한 당첨번호가 1 ~ 45 사이의 숫자가 아닐 경우 예외 처리
    -   중복된 숫자가 존재할 경우 예외 처리
-   setter로 보너스 번호를 저장함
    -   위에서 받은 당첨 번호와 중복되면 예외 처리
    -   1 ~ 45사이의 숫자가 아닌 경우 예외 처리
-   setter로 lottoList를 받아서 lottoRankResult를 아래의 과정을 거쳐 할당함
    -   1에서 만든 로또 배열이 든 배열을 받아서 하나씩 당첨번호와 보너스 번호에 일치하는지 비교함
    -   비교 결과를 토대로 등수를 계산해서 반환함

3. 당첨금액을 계산해서 수익률을 계산하는 ProfitCalculator class

-   등수 결과를 저장할 lottoRankResult와 구입매수를 저장할 buyingAmount 필드
-   2에서 만든 등수를 토대로 당첨금을 계산해야 함
-   계산한 당첨금과 구입가격(구입매수 x 1000)을 토대로 수익률을 계산하고 소수점 둘째자리에서 반올림해야 함

4. 위의 결과값들을 화면에 출력할 문구를 만들 Script 객체

-   구입 금액과 1의 결과값을 토대로 형식에 맞는 출력문구를 만들어야 하는 showLottoInfo()메소드
    -   LottoGenerator class의 buyingAmount, lottoList field를 매개변수로 받음
    ```
    ex)
    8개를 구매했습니다.
    [8, 21, 23, 41, 42, 43]
    [3, 5, 11, 16, 32, 38]
    [7, 11, 16, 35, 36, 44]
    [1, 8, 11, 31, 41, 42]
    [13, 14, 16, 38, 42, 45]
    [7, 11, 30, 40, 42, 43]
    [2, 13, 22, 32, 38, 45]
    [1, 3, 5, 14, 22, 45]
    ```
-   2와 3의 결과값을 토대로 당첨 통계 출력 문구를 만드는 showTotalProfit() 메소드
    -   profitCalulator를 받아 해당 필드의 calculateProfit 메소드의 결과값인 수익률과 lottoRankResult 필드를 통해 등수 개수를 문자열로 만듦
    ```
    ex)
    당첨 통계
    ---
    3개 일치 (5,000원) - 1개
    4개 일치 (50,000원) - 0개
    5개 일치 (1,500,000원) - 0개
    5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
    6개 일치 (2,000,000,000원) - 0개
    총 수익률은 62.5%입니다.
    ```

5. App에서 객체와 클래스를 조합해야 함

-   LottoGenerator class를 받는 lottoList field와 LottoMatcher class를 받는 lottoMatcher field 존재
-   위 필드들을 통해 Script 객체로 필요한 값들을 넘겨줌
-   입력이 잘못된 경우 에러문을 반환하고 다시 입력을 받아야 함
    -   catch문에서 error를 출력하고 다시 해당 함수를 호출하여 입력값을 받음
    -   다시 입력을 받기 위해 4개의 메소드로 분리시킴
