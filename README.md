# javascript-lotto-precourse

## 진행 방식 중 이전에 반영하지 않은 사항
- 함수 메서드의 길이가 15라인을 넘지 않는다.

## 기능
1. 사용자로 부터 양의 정수 또는 0인 로또 구매 금액을 입력받는다.
   - 양의 정수 또는 0이 아닌 경우에 대해 예외를 발생시킨 뒤 에러 문구를 출력한다.
   > 예시 : -1000, abcd, ?<>f
   - 1000으로 나누어 떨어지지 않는 경우에 대해 예외를 발생시킨 뒤 에러문구를 출력한다.
   > 예시 : 1302, 100, 3001
   - 입력을 받지 못한 경우에 대해 예외를 발생 시킨 뒤 에러문구를 출력한다.
   > 예시: ""
2. 사용자로 부터 로또 당첨 번호를 구분자로 구분된 문자열로 입력받는다.
   - 구분자가 ,가 아닌 경우에 대해 예외를 발생시킨 뒤 에러문구를 출력한다.
   > 예시: "1000.2000", "1000 4000"
   - 입력을 받지 못한 경우에 대해 예외를 발생시킨 뒤 에러문구를 출력한다.
   > 예시: ""
   - 숫자가 아닌 다른 값이 포함된 경우에 대해 예외를 발생시킨 뒤 에러문구를 출력한다.
   > 예시: "1000,abcd,10ad"
   - 구분자로 구분된 각각의 숫자가 1과 45사이의 수가 아닌 경우에 대해 예외를 발생시킨 뒤 에러문구를 출력한다.
   > 예시: "1,67,2,4,5,6"
   - 구분자로 구분된 각각의 숫자의 개수가 6개가 아닌 경우에 대해 예외를 발생시킨 뒤 에러문구를 출력한다.
3. 사용자로 부터 보너스 번호를 입력받는다.
   - 입력받은 정수가 1이상 45이하의 수가 아닌 경우에 대해 예외를 발생시킨 뒤 에러문구를 출력한다.
   > 예시: 49
   - 입력받은 정수가 숫자가 아닌 경우에 대해 예외를 발생시킨 뒤 에러문구를 출력한다.
   > 예시: "abc"
   - 입력받은 정수가 사용자로부터 입력받은 로또번호에 포함되면 안된다.
4. 발행한 로또 수량 및 번호를 각각 오름차순으로 출력한다.
   - 제공된 랜덤숫자 생성 함수를 통해 랜덤 수를 생성한뒤 각각을 오름차순으로 정렬하여 배열에 담는다.
5. 당첨내역을 추가한다.
   - 사용자가 입력한 로또번호와 무작위로 생성된 로또번호 셋을 비교하여 당첨내역을 계산해 출력한다.
6. 수익률을 두번째 자리수에서 반올림하여 출력한다.
   - round함수를 이용해 두번째 자리에서 반올림하여 출력한다.

## 단위테스트 시
1. 사용자로부터 로또 구매 금액을 입력받는 부분에 대해 단위테스트를 진행한다. 테스트시 필요한 테스트 케이스를 추가한다
2. 사용자로부터 입력받은 당첨번호에 대해 적절하게 파싱하여 파싱 결과에 대해 단위테스트를 진행한다.
3. 사용자로부터 입력받은 보너스번호에 대해 입력받은 값의 타당성을 검증하는 단위테스트를 진행한다.
4. 발행한 로또 수량 및 번호를 오름차순으로 정렬하는 것에 대해 결과가 적절한지를 검증하기 위해 단위테스트를 진행한다.
5. 당첨내역을 계산하여 그 결과가 적절한지 단위테스트를 진행한다.
6. 계산된 수익률이 적절하게 두 번째 자리수에서 반올림되었는지 검증하는 단위테스트를 진행한다.

## 현재 개발 추이
- [X] input price for lotto
- [X] seperated by seperator
- [X] input number of bonus
- [X] sorting lotto numbers generated randomly
- [X] print result of lotto
- [X] round result

## 고전한 내용
이전에 script 상 명령어는 yarn start 또는 yarn test였다. 하지만 이번엔 디렉토리를 제대로 적용하기 위해선 yarn run start 또는 yarn run test로 진행해야한다. 그리고 import시 상대경로는 js확장자를 붙여야한다.

## 다시 생각한 내용 1
Lotto 클래스의 용도를 처음 사용자로 부터 입력받은 초기 로또번호를 검증하는 용도로만 사용하려고 했으나, 로또번호들의 배열들을 무작위 생성시에(로또 가격을 통한 개수만큼) 로또객체를 생성하여 배열에 담아 사용할 수 있을 것 같았다. 또한 무작위로 생성한 로또번호들의 유효성을 평가할 때도 같은 함수를 사용하여 평가할 수 있으므로 재사용성이 높아질 것이다. 따라서 이전에는 무작위로 생성된 로또번호를 2차원 배열에 담았다면 이제는 로또 객체들을 1차원 배열의 각 원소로 하여 1차원 배열을 App에서 다루는 것으로 수정한다.

## 다시 생각한 내용 2
사용자가 입력한 값이 잘못된 경우에 대해서 에러를 발생시킨 뒤 그 위치부터 다시 입력받아야 하므로 적절한 에러를 발생시켰는지 확인하는 단위테스트 코드들은 skip을 하고 테스트를 진행해야한다. 마지막에는 ApplicationTest에 있는 Exception테스트를 이용하여 잘못된 값이 입력된 경우에 대해서 적절한 값을 다시 넣어주어 적절한 입력을 만든 뒤 출력이 맞는지를 검증할 필요가 있다.

## yarn을 사용하는 도중 발생한 package-lock.json 수정에 대한 조치
초기 패키지 의존성 문제를 해결하는 과정에서 package-lock.json을 수정했고 이를 다시 원상 복귀하였음

## 문제를 풀고 나서...
문제를 풀고나서 claude에 코드를 올려 리팩터링을 부탁했다. claude는 LottoManager, InputManager, ResultManager로 나누어 LottoManager는 로또 생성과 관리를 담당하는 클래스로 InputManager는 사용자 입력 처리와 검증을 담당하는 클래스로 ResultManager는 당첨 결과 계산과 출력을 담당하여 리팩터링했다. 이 코드를 그대로 복사하는 것은 의미가 없으므로 이 코드를 통해 따로 디자인 패턴을 공부하여 다음 과제에 적용할 것이다.