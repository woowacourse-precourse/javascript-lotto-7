# javascript-lotto-precourse

## 학습 목표 (point)

- 관련 함수를 묶어 클래스를 만들고, 객체들을 바탕으로 하나의 큰 기능을 수행하도록 한다.
- 클래스와 함수에 대한 단위 테스트하기

## 기능 요구 사항

**간단한 로또 발매기를 구현한다.**

- 로또 번호의 숫자 범위는 1~45
- 1개의 로또를 발행할 때 **중복**되지 않는 6개의 숫자 뽑기
- 당첨 번호 추첨 시, 중복되지 않는 숫자 6개와 보너스 번호 1개를 뽑기
- 당첨은 1등~5등
  - 1등: 6개 번호 일치 / 2,000,000,000원
  - 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
  - 3등: 5개 번호 일치 / 1,500,000원
  - 4등: 4개 번호 일치 / 50,000원
  - 5등: 3개 번호 일치 / 5,000원
- 로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또 발행
  - 1장 당 가격 1000원
- 당첨 번호와 보너스 번호를 입력 받아야함.
- 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률 출력 -> 종료
- 사용자 잘못된 값 입력 시, "[Error]"로 시작하는 메시지 -> **해당지점부터 다시 입력받기**

## 입출력 요구 사항

#### 입력

- 1000원 단위로 입력 받기
  - 예외 : 1000원 단위로 안떨어지는 경우, 예외처리 (다시 재입력)
  - 당첨번호 입력 (번호는 쉼표 기준)
  - 보너스 번호 입력

#### 출력

- 산 가격에 맞춰 로또 갯수 출력 (오름차순 정렬)
  - ex) 2개를 구매했습니다.
  - [8, 21, 23, 41, 42, 43]
  - [3, 5, 11, 16, 32, 38]
- 당첨 내역 출력
  - 3개 일치 (5,000원) - 1개
  - 4개 일치 (50,000원) - 0개
  - 5개 일치 (1,500,000원) - 0개
  - 5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
  - 6개 일치 (2,000,000,000원) - 0개
- 수익률은 소수점 둘째자리에서 반올림
- 예외상황 "[Error]"문구와 함께 출력

## 고려 사항

- else문 지양 (return 하는 방식으로 진행)
- 구현한 기능에 대한 단위 테스트 작성 (UI로직 제외)
- Random.pickUniqueNumbersInRange() 활용
  - ex)1에서 45 사이의 중복되지 않은 정수 6개 반환 (pickUniqueNumbersInRange(1, 45, 6);)
- 제공된 Lotto 클래스 이용해서 구현
  - numbers 변수 이외에 추가 x, 접근 제어자 # 변경 x
  - 패키지는 변경 가능(디렉터리 이동 가능)

---

### 구현할 기능 목록

- [x] 기능 먼저 구현하기
- [x] 기능 구현 후, 리팩토링
- [x] lotto 클래스화

#### 입력

- [x] 로또 구매할 숫자 입력
  - [x] 1000으로 나눠서 나온 몫이 로또 살 갯수 (나머지가 0이어야함.)
  - [x] 예외
    - [x] 숫자가 아닌 값 입력 (빈값 포함)
    - [x] 1000원 단위가 아닌 경우 (ex.14100)
    - [x] 1000원 이하인 경우 (ex.300)
- [x] 로또 당첨번호 6개 입력하기
  - [x] 6개의 숫자는 ","로 구분해서 입력
  - [x] 예외
    - [x] 숫자가 아닌 경우 (빈값 포함)
    - [x] 6개가 아닌 경우 (구분자가 없는 경우?)
    - [x] 중복된 숫자 들어가 있을 경우
    - [x] 1~45까지의 숫자
- [x] 보너스 번호 1개 입력하기
  - [x] 예외
    - [x] 숫자가 아닌 경우
- [x] (당첨번호 + 보너스 번호) 45개의 배열 선언 후, 해당 번호를 해당 인덱스에 넣기 (해싱) (성능향상)
  - [x] 당첨번호는 1
  - [x] 보너스 번호는 2

#### 출력

- [x] 로또 산 갯수 출력하기 (ex. "00개를 구매했습니다.")
- [x] 산 갯수만큼 로또 번호 출력하기
  - [x] 로또 1개당) 1~45까지 랜덤한 수 6개 뽑기 (Random.pickUniqueNumbersInRange 이용)
    - [x] 중복 x
    - [x] 오름차순 정렬
- [x] 당첨통계 출력
  - [x] 입력된(로또 당첨 번호 + 보너스 번호)로 출력된 로또 번호들과 매치
    - [x] 로또 당첨 번호가 들어가 있는 45개의 배열들의 인덱스에서 로또 번호와 매치
      - [x] 맞으면 해당 로또 줄의 당첨 갯수 1씩 증가
      - [x] 보너스 번호(2)가 맞으면 isBonusMatched 값 true
      - [x] 갯수 가공후, 따로 객체에 저장
    - [x] 형식에 맞춰 출력하기
- [x] 수익률 출력
  - [x] (당첨된 금액의 합산 / 로또 산 개수\*1000) \*100 => 수익률
    - [x] 수익률 출력
      - [x] 정수는 정수로 출력
      - [x] 소수점 1자리수는 1자리수까지 출력
      - [x] 소수점 2자리수 이상은 2자리까지 끊어서 출력하기

---

#### 테스트 코드 추가 작성

- [x] Lotto 클래스 단위 테스트 추가
- [x] LottoProcessor 클래스 단위 테스트 추가
- [x] WinningLotto 클래스 단위 테스트 추가
- [x] input 예외 사항 테스트코드 추가

### 추가 수정 사항

- [x] 수익률 계산 메소드 리팩토링
- [x] InputHandler 따로 뺴기
  - [x] 기본 입력 로직 메소드 생성 (에러시, 재반복)
  - [x] 유효성 검사 후, 해당 값 Return
  - [x] 에러 발생 후, 에러 출력
- [x] OutputHandler 따로 뺴기 (print 관련 한 클래스에서 작업)
  - [x] 로또 갯수 출력
  - [x] 랜덤 로또 번호 출력
  - [x] 최종 당첨 결과 출력
  - [x] 수익률 출력
- [x] lotto 클래스화 (랜덤 로또 관련 넣기)
  - [x] 랜덤 로또 번호 인스턴스 생성
  - [x] 생성과 동시에 오름차순 정렬
  - [x] validate 핸들링
  - [x] 로또 번호 반환
  - [x] 당첨번호 비교 후 갯수 리턴
  - [x] 보너스 번호 유무 확인
- [x] lottoProcessor 클래스 제작 (랜덤로또번호와 당첨 번호를 비교하고 결과를 처리하는 로직)
  - [x] lotto번호 생성 및 출력 메소드
  - [x] 당첨 번호 비교 (순회)
  - [x] winningRanks 업데이트
  - [x] winningRanks 출력
- [x] WinningLotto 클래스 제작 (당첨 번호 및 보너스 번호 관리 클래스)

  - [x] 당첨번호 가공
  - [x] 보너스 번호 가공
  - [x] winningNumbersArray 출력

- [x] ErrorHandler 클래스 별도 구현
- [x] 하드코딩 -> 상수화
